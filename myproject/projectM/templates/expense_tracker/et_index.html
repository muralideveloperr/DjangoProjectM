
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expense Tracker - Filters</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
    }

    .tracker-container {
      max-width: 900px;
      margin: 40px auto;
      padding: 25px;
      background-color: white;
      border-radius: 16px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.05);
    }

    .filter-card {
      background-color: #f1f3f5;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.02);
    }

    .filter-card .form-label {
      font-weight: 500;
    }

    .filter-btn {
      margin-top: 32px;
    }

    .expense-table th {
      background-color: #0d6efd;
      color: white;
    }

    .summary {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="tracker-container">
    <!-- Back Button Section Start -->
  {% include 'includes/back_to_service_button.html' %}
  <!-- Back Button Section End -->
  <h2 class="text-center mb-4">ðŸ’¸ Expense Tracker</h2>

  <!-- Filter Section -->
  <div class="filter-card">
    <form method="get" class="row g-3 align-items-end">
      <div class="col-md-3">
        <label for="start-date" class="form-label"><i class="bi bi-calendar-date"></i> Start Date</label>
        <input type="date" id="start-date" name="start_date" class="form-control">
      </div>
      <div class="col-md-3">
        <label for="end-date" class="form-label"><i class="bi bi-calendar-date-fill"></i> End Date</label>
        <input type="date" id="end-date" name="end_date" class="form-control">
      </div>
      <div class="col-md-3">
        <label for="category" class="form-label"><i class="bi bi-tags"></i> Category</label>
        <select id="category" name="category" class="form-select">
        <option value="">All Categories</option>
          {% if categories %}
          {% for category in categories %}
          <option value="{{category.id}}">{{category.category_name}}</option>
          {% endfor %}
          {% else %}
          <option>No categories available</option>
          {% endif %}
        </select>
      </div>
      <div class="col-md-3 filter-btn">
        <button type="submit" class="btn btn-primary w-100"><i class="bi bi-funnel-fill me-1"></i> Apply Filters</button>
      </div>
    </form>
    
  </div>
  <div class="table table-bordered">
    <a href="{% url 'projectM:add_expense' %}" class="btn btn-success">
    <i class="bi bi-plus-circle me-1"></i> Add Expense
  </a>
</div>
  

  <!-- Expense Table -->
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Date</th>
        <th>Category</th>
        <th>Description</th>
        <th>Amount (â‚¹)</th>
      </tr>
    </thead>
    <tbody>
    {% if expenses %}
      {% for expense in expenses %}
      <tr>
        <td>{{ expense.date|date:"Y-m-d" }}</td>
        <td>{{ expense.category.category_name }}</td>
        <td>{{ expense.description }}</td>
        <td>â‚¹{{ expense.amount }}</td>
      </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="4">No expenses found</td>
      </tr>
    {% endif %}
    </tbody>
  </table>

  <div class="summary text-end">
    Total: â‚¹{{ total_amount }}
  </div>
</div>

</body>
</html>
