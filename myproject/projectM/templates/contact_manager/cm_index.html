<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“‡ Contact Manager</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
    }

    .container {
      max-width: 900px;
      margin-top: 40px;
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
    }

    .contact-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .contact-header h2 {
      margin: 0;
    }

    .contact-table th {
      background-color: #0d6efd;
      color: white;
    }

    .form-control, .btn {
      border-radius: 8px;
    }

    .action-buttons i {
      font-size: 1rem;
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>

<div class="container">
       <div style="padding: 20px;" class="d-flex justify-content-end">
         <a href="{% url 'projectM:services' %}" class="btn btn-outline-secondary btn-sm shadow-sm home-btn">
            Back to Services
         </a>
       </div>
  <div class="contact-header mb-4">
    <h2>ðŸ“‡ Contact Manager</h2>
    <a href="{% url 'projectM:add_contact' %}" class="btn btn-success">
  <i class="bi bi-person-plus-fill me-1"></i> Add Contact
</a>

  </div>
  <!-- Error & Success Messages -->
        {% include "includes/errors.html" %}

  <!-- Contact List Table -->
  <table class="table table-bordered contact-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for contact in contacts %}
      <tr>
        <td>{{ contact.name }}</td>
        <td>{{ contact.phone }}</td>
        <td>{{ contact.email }}</td>
        <td class="action-buttons">
          <button class="btn btn-sm btn-primary"><a href="{% url 'projectM:edit_contact' contact_id=contact.id %}" class="text-white"><i class="bi bi-pencil-square"></i></a></button>
          <button onclick="confirmBeforeDelete('{% url 'projectM:delete_contact' contact_id=contact.id %}')" class="btn btn-sm btn-danger"><i class="bi bi-trash-fill"></i></button>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="text-center">No Contacts Found</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
           function confirmBeforeDelete(url){
             var userConfirmed = confirm("Are you sure you want to delete this contact?")

             if (userConfirmed){
               window.location.href = url
             }
           } 
       </script>

</body>
</html>
